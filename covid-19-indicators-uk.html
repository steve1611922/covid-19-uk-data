<!DOCTYPE html>
<html>
<head>
    <title>UK COVID-19 indicators</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.10.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.7.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.3.2"></script>
</head>
<body>
<table>
    <tr>
        <td>
            <div id="p1"></div>
            <div id="p2"></div>
            <div id="p3"></div>    
        </td>
    </tr>
    <tr>
        <td>
            <div id="p4"></div>
            <div id="p5"></div>
            <div id="p6"></div>    
        </td>
    </tr>
    <tr>
        <td>
            <div id="p7"></div>
            <div id="p8"></div>
            <div id="p9"></div>    
        </td>
    </tr>
</table>
<a href="index.html">Home</a>
<script type="text/javascript">
const p1 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK daily tests",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Tests'"
    }, {
        "window": [{"op": "lag", "field": "Value", "as": "Prev"}]
    }, {
        "calculate": "if(datum.Prev == null, NaN, datum.Value - datum.Prev)",
        "as": "DailyTests"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "DailyTests", "type": "quantitative"}
    }
};
const p2 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative tests",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Tests'"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Value", "type": "quantitative"}
    }
};
const p3 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative tests (log scale)",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Tests'"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Value", "type": "quantitative", "scale": {"type": "log"}}
    }
};
const p4 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK daily confirmed cases",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'ConfirmedCases'"
    }, {
        "window": [{"op": "lag", "field": "Value", "as": "Prev"}]
    }, {
        "calculate": "if(datum.Prev == null, NaN, datum.Value - datum.Prev)",
        "as": "DailyCases"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "DailyCases", "type": "quantitative"}
    }
};
const p5 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative confirmed cases",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'ConfirmedCases'"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Value", "type": "quantitative"}
    }
};
const p6 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative confirmed cases (log scale)",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'ConfirmedCases'"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Value", "type": "quantitative", "scale": {"type": "log"}}
    }
};
const p7 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK daily deaths",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Deaths'"
    }, {
        "window": [{"op": "lag", "field": "Value", "as": "Prev"}]
    }, {
        "calculate": "datum.Value - datum.Prev",
        "as": "DailyDeaths"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "DailyDeaths", "type": "quantitative"}
    }
};
const p8 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative deaths",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Deaths'"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Value", "type": "quantitative"}
    }
};
const p9 = {
    "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
    "description": "UK cumulative deaths (log scale)",
    "data": {"url": "data/covid-19-indicators-uk.csv"},
    "transform": [{
        "filter": "datum.Country == 'UK' && datum.Indicator == 'Deaths'"
    }, {
        "calculate": "if(datum.Value == 0, NaN, datum.Value)",
        "as": "Deaths"
    }],
    "mark": "line",
    "encoding": {
        "x": {"field": "Date", "type": "temporal"},
        "y": {"field": "Deaths", "type": "quantitative", "scale": {"type": "log"}}
    }
};
vegaEmbed('#p1', p1);
vegaEmbed('#p2', p2);
vegaEmbed('#p3', p3);
vegaEmbed('#p4', p4);
vegaEmbed('#p5', p5);
vegaEmbed('#p6', p6);
vegaEmbed('#p7', p7);
vegaEmbed('#p8', p8);
vegaEmbed('#p9', p9);
</script>
</body>
</html>